<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>
    [转]浅谈 PHP 与手机 APP 开发（API 接口开发） &laquo; ___道子千秋
</title>
<link rel="stylesheet" href="http://blog.whatisit.cn/wp-content/themes/ink-and-wash/style.css" type="text/css" media="screen" />
<link title="RSS 2.0" type="application/rss+xml" href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/?feed=rss2" rel="alternate" />
<!--[if IE 6]>
<script type="text/javascript" src="http://blog.whatisit.cn/wp-content/themes/ink-and-wash/js/DD_belatedPNG.js"></script>
<script>DD_belatedPNG.fix('.nav li,.searchsm'); </script> 
<![endif]-->
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="韻秋小道童 &raquo; [转]浅谈 PHP 与手机 APP 开发（API 接口开发）评论Feed" href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/?feed=rss2&#038;p=1026" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/blog.whatisit.cn\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='https://api.w.org/' href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/?rest_route=/' />
<link rel='prev' title='乙未年丁亥月壬寅日與曼曼' href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1020/index.html' />
<link rel='next' title='[转]PHP写webservice服务端' href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1028/index.html' />
<meta name="generator" content="WordPress 4.6.1 - really-static 0.5" />
<link rel="canonical" href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1026/index.html" />
<link rel="alternate" type="application/json+oembed" href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/?rest_route=%2Foembed%2F1.0%2Fembed&#038;url=http%3A%2F%2Fblog.whatisit.cn%2Fwp-content%2Fplugins%2Freally-static%2Fstatic%2Fp%3D1026%2Findex.html" />
<link rel="alternate" type="text/xml+oembed" href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/?rest_route=%2Foembed%2F1.0%2Fembed&#038;url=http%3A%2F%2Fblog.whatisit.cn%2Fwp-content%2Fplugins%2Freally-static%2Fstatic%2Fp%3D1026%2Findex.html&#038;format=xml" />
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		</head>

<body itemtype="http://schema.org/WebPage" itemscope="">

   <div id="fullwrapper">
       <div class="wrap">
           <div class="header">
               <div class="logo"><p><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/"><font size="8" face="KaiTi">韻秋小道童</font></a></p><font size="5" face="KaiTi">被玩壞的小道童</font></div>
               	 <ul class="nav">
                 		<li><a title="首页" href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/">首页</a></li>
                 		<li><a title="江湖故事" href="/jhgs-html/">江湖故事</a></li>
	<li class="page_item page-item-870"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=870/index.html">IT便利貼</a></li>
<li class="page_item page-item-837"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=837/index.html">江湖故事</a></li>
<li class="page_item page-item-9"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=9/index.html">我的微博</a></li>
<li class="page_item page-item-47"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=47/index.html">自省三聲</a></li>
                </ul>
           </div>
       </div>
       <div class="wrap">	<div id="content" class="widecolumn" role="main">
		<div class="content_top conleft"></div>
	
		<div class="post-1026 post type-post status-publish format-standard hentry category-development" id="post-1026">
			<h2>[转]浅谈 PHP 与手机 APP 开发（API 接口开发）</h2>
				<div class="post_intro">
					<span>tydqq Post in <a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=11/index.html" rel="category">Development</a>，</span>
									</div>
				<div class="content_date">
					<div class="datebg">
						<span class="day">23</span>
						<span>十一月</span>
						<span>2015</span>
					</div>
				</div>
				<div class="comments">
					<span class="cmt_num"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1026/index.html#respond">0</a></span>
				</div>
				
			<div class="entry">
				<p><span style="color: #323232;">一、先简单回答两个问题：</span><br style="color: #323232;" /><span style="color: #323232;">1、PHP 可以开发客户端？</span><br style="color: #323232;" /><span style="color: #323232;">答：不可以，因为PHP是脚本语言，是负责完成 B/S架构 或 C/S架构 的S部分<span id="more-1026"></span></span></p>
<p>，即：服务端的开发。<br style="color: #323232;" /><br style="color: #323232;" /><span style="color: #323232;">2、为什么选择 PHP 作为开发服务端的首选？</span><br style="color: #323232;" /><span style="color: #323232;">答：跨平台（可以运行在UNIX、LINUX、WINDOWS、Mac OS下）、低消耗（PHP消耗相当少的系统资源）、运行效率高（相对而言）、MySQL的完美搭档，本身是免费开源的，&#8230;&#8230;</span><br style="color: #323232;" /><br style="color: #323232;" /><span style="color: #323232;">二、如何使用 PHP 开发 API（Application Programming Interface，应用程序编程接口） 呢？</span><br style="color: #323232;" /><br style="color: #323232;" /><span style="color: #323232;">做过 API 的人应该了解，其实开发 API 比开发 WEB 更简洁，但可能逻辑更复杂，因为 API 其实就是数据输出，不用呈现页面，所以也就不存在 MVC（API 只有 M 和 C），</span><br style="color: #323232;" /><span style="color: #323232;">1、和 WEB 开发一样，首先需要一些相关的参数，这些参数，都会由客户端传过来，也许是 GET 也许是 POST，这个需要开发团队相互之间约定好，或者制定统一规范。</span><br style="color: #323232;" /><span style="color: #323232;">2、有了参数，根据应用需求，完成数据处理，例如：任务进度更新、APP内购、一局游戏结束数据提交等等</span><br style="color: #323232;" /><span style="color: #323232;">3、数据逻辑处理完之后，返回客户端所需要用到的相关数据，例如：任务状态、内购结果、玩家信息等等</span><br style="color: #323232;" /><span style="color: #323232;">数据怎么返给客户端？</span><br style="color: #323232;" /><span style="color: #323232;">直接输出的形式，如：JSON、XML、TEXT 等等。</span><br style="color: #323232;" /><span style="color: #323232;">4、客户端获取到你返回的数据后，在客户端本地和用户进行交互</span><br style="color: #323232;" /><br style="color: #323232;" /><span style="color: #323232;">临时写的一个简单 API 例子：</span><code class="prettyprint linenums lang-php prettyprinted" style="color: #323232;"></code></p>
<ol class="linenums" style="color: #2ba5d8;">
<li class="L0"><span class="pun" style="color: #666600;">&lt;?</span><span class="pln" style="color: #000000;">php</span></li>
<li class="L1"><span class="pln" style="color: #000000;">$output </span><span class="pun" style="color: #666600;">=</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">();</span></li>
<li class="L2"><span class="pln" style="color: #000000;">$a </span><span class="pun" style="color: #666600;">=</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">@$_GET</span><span class="pun" style="color: #666600;">[</span><span class="str" style="color: #008800;">&#8216;a&#8217;</span><span class="pun" style="color: #666600;">]</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">?</span><span class="pln" style="color: #000000;"> $_GET</span><span class="pun" style="color: #666600;">[</span><span class="str" style="color: #008800;">&#8216;a&#8217;</span><span class="pun" style="color: #666600;">]</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">:</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8221;</span><span class="pun" style="color: #666600;">;</span></li>
<li class="L3"><span class="pln" style="color: #000000;">$uid </span><span class="pun" style="color: #666600;">=</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">@$_GET</span><span class="pun" style="color: #666600;">[</span><span class="str" style="color: #008800;">&#8216;uid&#8217;</span><span class="pun" style="color: #666600;">]</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">?</span><span class="pln" style="color: #000000;"> $_GET</span><span class="pun" style="color: #666600;">[</span><span class="str" style="color: #008800;">&#8216;uid&#8217;</span><span class="pun" style="color: #666600;">]</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">:</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">0</span><span class="pun" style="color: #666600;">;</span></li>
<li class="L4"></li>
<li class="L5"><span class="pln" style="color: #000000;"> </span><span class="kwd" style="color: #000088;">if</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">empty</span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">$a</span><span class="pun" style="color: #666600;">))</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">{</span></li>
<li class="L6"><span class="pln" style="color: #000000;">    $output </span><span class="pun" style="color: #666600;">=</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">&#8216;data&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;">NULL</span><span class="pun" style="color: #666600;">,</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;info&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="str" style="color: #008800;">&#8216;坑爹啊!&#8217;</span><span class="pun" style="color: #666600;">,</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;code&#8217;</span><span class="pun" style="color: #666600;">=&gt;-</span><span class="lit" style="color: #006666;">201</span><span class="pun" style="color: #666600;">);</span></li>
<li class="L7"><span class="pln" style="color: #000000;">    </span><span class="kwd" style="color: #000088;">exit</span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">json_encode</span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">$output</span><span class="pun" style="color: #666600;">));</span></li>
<li class="L8"><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">}</span></li>
<li class="L9"></li>
<li class="L0"><span class="pln" style="color: #000000;"> </span><span class="com" style="color: #880000;">//走接口</span></li>
<li class="L1"><span class="pln" style="color: #000000;"> </span><span class="kwd" style="color: #000088;">if</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">$a </span><span class="pun" style="color: #666600;">==</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;get_users&#8217;</span><span class="pun" style="color: #666600;">)</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">{</span></li>
<li class="L2"><span class="pln" style="color: #000000;">    </span><span class="com" style="color: #880000;">//检查用户</span></li>
<li class="L3"><span class="pln" style="color: #000000;">    </span><span class="kwd" style="color: #000088;">if</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">$uid </span><span class="pun" style="color: #666600;">==</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">0</span><span class="pun" style="color: #666600;">)</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">{</span></li>
<li class="L4"><span class="pln" style="color: #000000;">        $output </span><span class="pun" style="color: #666600;">=</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">&#8216;data&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;">NULL</span><span class="pun" style="color: #666600;">,</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;info&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="str" style="color: #008800;">&#8216;The uid is null!&#8217;</span><span class="pun" style="color: #666600;">,</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;code&#8217;</span><span class="pun" style="color: #666600;">=&gt;-</span><span class="lit" style="color: #006666;">401</span><span class="pun" style="color: #666600;">);</span></li>
<li class="L5"><span class="pln" style="color: #000000;">        </span><span class="kwd" style="color: #000088;">exit</span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">json_encode</span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">$output</span><span class="pun" style="color: #666600;">));</span></li>
<li class="L6"><span class="pln" style="color: #000000;">    </span><span class="pun" style="color: #666600;">}</span></li>
<li class="L7"></li>
<li class="L8"><span class="pln" style="color: #000000;">    </span><span class="com" style="color: #880000;">//假设 $mysql 是数据库</span></li>
<li class="L9"><span class="pln" style="color: #000000;">    $mysql </span><span class="pun" style="color: #666600;">=</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span></li>
<li class="L0"><span class="pln" style="color: #000000;">        </span><span class="lit" style="color: #006666;">10001</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span></li>
<li class="L1"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;uid&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">10001</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L2"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;vip&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">5</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L3"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;nickname&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;Shine X&#8217;</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L4"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8217;email&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="str" style="color: #008800;">&#8216;979137@qq.com&#8217;</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L5"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;qq&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">979137</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L6"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;gold&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">1500</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L7"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;powerplay&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">&#8216;2xp&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">12</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;gem&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">12</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;bingo&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">5</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;keys&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">5</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;chest&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">8</span><span class="pun" style="color: #666600;">),</span></li>
<li class="L8"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;gems&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">&#8216;red&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">13</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;green&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">3</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;blue&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">8</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;yellow&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">17</span><span class="pun" style="color: #666600;">),</span></li>
<li class="L9"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;ctime&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">1376523234</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L0"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;lastLogin&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">1377123144</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L1"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;level&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">19</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L2"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;exp&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">16758</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L3"><span class="pln" style="color: #000000;">        </span><span class="pun" style="color: #666600;">),</span></li>
<li class="L4"><span class="pln" style="color: #000000;">        </span><span class="lit" style="color: #006666;">10002</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span></li>
<li class="L5"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;uid&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">10002</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L6"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;vip&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">50</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L7"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;nickname&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;elva&#8217;</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L8"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8217;email&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="str" style="color: #008800;">&#8216;elva@ezhi.net&#8217;</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L9"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;qq&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;">NULL</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L0"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;gold&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">14320</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L1"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;powerplay&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">&#8216;2xp&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">1</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;gem&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">120</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;bingo&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">51</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;keys&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">5</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;chest&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">8</span><span class="pun" style="color: #666600;">),</span></li>
<li class="L2"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;gems&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">&#8216;red&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">13</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;green&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">3</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;blue&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">8</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;yellow&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">17</span><span class="pun" style="color: #666600;">),</span></li>
<li class="L3"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;ctime&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">1376523234</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L4"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;lastLogin&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">1377123144</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L5"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;level&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">112</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L6"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;exp&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">167588</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L7"><span class="pln" style="color: #000000;">        </span><span class="pun" style="color: #666600;">),</span></li>
<li class="L8"><span class="pln" style="color: #000000;">        </span><span class="lit" style="color: #006666;">10003</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span></li>
<li class="L9"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;uid&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">10003</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L0"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;vip&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">5</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L1"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;nickname&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;Lily&#8217;</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L2"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8217;email&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;Lily@ezhi.net&#8217;</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L3"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;qq&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> NULL</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L4"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;gold&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">1541</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L5"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;powerplay&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">&#8216;2xp&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">2</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;gem&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">112</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;bingo&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">4</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;keys&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">7</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;chest&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">8</span><span class="pun" style="color: #666600;">),</span></li>
<li class="L6"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;gems&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">&#8216;red&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">13</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;green&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">3</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;blue&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">9</span><span class="pun" style="color: #666600;">,</span><span class="str" style="color: #008800;">&#8216;yellow&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="lit" style="color: #006666;">7</span><span class="pun" style="color: #666600;">),</span></li>
<li class="L7"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;ctime&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">1376523234</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L8"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;lastLogin&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">1377123144</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L9"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;level&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">10</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L0"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;exp&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">1758</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L1"><span class="pln" style="color: #000000;">        </span><span class="pun" style="color: #666600;">),</span></li>
<li class="L2"><span class="pln" style="color: #000000;">    </span><span class="pun" style="color: #666600;">);</span></li>
<li class="L3"><span class="pln" style="color: #000000;">    </span></li>
<li class="L4"><span class="pln" style="color: #000000;">    $uidArr </span><span class="pun" style="color: #666600;">=</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span><span class="lit" style="color: #006666;">10001</span><span class="pun" style="color: #666600;">,</span><span class="lit" style="color: #006666;">10002</span><span class="pun" style="color: #666600;">,</span><span class="lit" style="color: #006666;">10003</span><span class="pun" style="color: #666600;">);</span></li>
<li class="L5"><span class="pln" style="color: #000000;">    </span><span class="kwd" style="color: #000088;">if</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">in_array</span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">$uid</span><span class="pun" style="color: #666600;">,</span><span class="pln" style="color: #000000;"> $uidArr</span><span class="pun" style="color: #666600;">,</span><span class="pln" style="color: #000000;"> </span><span class="kwd" style="color: #000088;">true</span><span class="pun" style="color: #666600;">))</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">{</span></li>
<li class="L6"><span class="pln" style="color: #000000;">        $output </span><span class="pun" style="color: #666600;">=</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">&#8216;data&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> NULL</span><span class="pun" style="color: #666600;">,</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;info&#8217;</span><span class="pun" style="color: #666600;">=&gt;</span><span class="str" style="color: #008800;">&#8216;The user does not exist!&#8217;</span><span class="pun" style="color: #666600;">,</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;code&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">&#8211;</span><span class="lit" style="color: #006666;">402</span><span class="pun" style="color: #666600;">);</span></li>
<li class="L7"><span class="pln" style="color: #000000;">        </span><span class="kwd" style="color: #000088;">exit</span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">json_encode</span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">$output</span><span class="pun" style="color: #666600;">));</span></li>
<li class="L8"><span class="pln" style="color: #000000;">    </span><span class="pun" style="color: #666600;">}</span></li>
<li class="L9"></li>
<li class="L0"><span class="pln" style="color: #000000;">    </span><span class="com" style="color: #880000;">//查询数据库</span></li>
<li class="L1"><span class="pln" style="color: #000000;">    $userInfo </span><span class="pun" style="color: #666600;">=</span><span class="pln" style="color: #000000;"> $mysql</span><span class="pun" style="color: #666600;">[</span><span class="pln" style="color: #000000;">$uid</span><span class="pun" style="color: #666600;">];</span></li>
<li class="L2"><span class="pln" style="color: #000000;">    </span></li>
<li class="L3"><span class="pln" style="color: #000000;">    </span><span class="com" style="color: #880000;">//输出数据</span></li>
<li class="L4"><span class="pln" style="color: #000000;">    $output </span><span class="pun" style="color: #666600;">=</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span></li>
<li class="L5"><span class="pln" style="color: #000000;">        </span><span class="str" style="color: #008800;">&#8216;data&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> array</span><span class="pun" style="color: #666600;">(</span></li>
<li class="L6"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;userInfo&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> $userInfo</span><span class="pun" style="color: #666600;">,</span></li>
<li class="L7"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;isLogin&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="kwd" style="color: #000088;">true</span><span class="pun" style="color: #666600;">,</span><span class="com" style="color: #880000;">//是否首次登陆</span></li>
<li class="L8"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;unread&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">4</span><span class="pun" style="color: #666600;">,</span><span class="com" style="color: #880000;">//未读消息数量</span></li>
<li class="L9"><span class="pln" style="color: #000000;">            </span><span class="str" style="color: #008800;">&#8216;untask&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">3</span><span class="pun" style="color: #666600;">,</span><span class="com" style="color: #880000;">//未完成任务</span></li>
<li class="L0"><span class="pln" style="color: #000000;">        </span><span class="pun" style="color: #666600;">),</span><span class="pln" style="color: #000000;"> </span></li>
<li class="L1"><span class="pln" style="color: #000000;">        </span><span class="str" style="color: #008800;">&#8216;info&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;Here is the message which, commonly used in popup window&#8217;</span><span class="pun" style="color: #666600;">,</span><span class="pln" style="color: #000000;"> </span><span class="com" style="color: #880000;">//消息提示，客户端常会用此作为给弹窗信息。</span></li>
<li class="L2"><span class="pln" style="color: #000000;">        </span><span class="str" style="color: #008800;">&#8216;code&#8217;</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">=&gt;</span><span class="pln" style="color: #000000;"> </span><span class="lit" style="color: #006666;">200</span><span class="pun" style="color: #666600;">,</span><span class="pln" style="color: #000000;"> </span><span class="com" style="color: #880000;">//成功与失败的代码，一般都是正数或者负数</span></li>
<li class="L3"><span class="pln" style="color: #000000;">    </span><span class="pun" style="color: #666600;">);</span></li>
<li class="L4"><span class="pln" style="color: #000000;">    </span><span class="kwd" style="color: #000088;">exit</span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">json_encode</span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">$output</span><span class="pun" style="color: #666600;">));</span></li>
<li class="L5"><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">}</span><span class="pln" style="color: #000000;"> elseif </span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">$a </span><span class="pun" style="color: #666600;">==</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;get_games_result&#8217;</span><span class="pun" style="color: #666600;">)</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">{</span></li>
<li class="L6"><span class="pln" style="color: #000000;">    </span><span class="com" style="color: #880000;">//&#8230;</span></li>
<li class="L7"><span class="pln" style="color: #000000;">    </span><span class="kwd" style="color: #000088;">die</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">&#8216;您正在调 get_games_result 接口!&#8217;</span><span class="pun" style="color: #666600;">);</span></li>
<li class="L8"><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">}</span><span class="pln" style="color: #000000;"> elseif </span><span class="pun" style="color: #666600;">(</span><span class="pln" style="color: #000000;">$a </span><span class="pun" style="color: #666600;">==</span><span class="pln" style="color: #000000;"> </span><span class="str" style="color: #008800;">&#8216;upload_avatars&#8217;</span><span class="pun" style="color: #666600;">)</span><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">{</span></li>
<li class="L9"><span class="pln" style="color: #000000;">    </span><span class="com" style="color: #880000;">//&#8230;.</span></li>
<li class="L0"><span class="pln" style="color: #000000;">    </span><span class="kwd" style="color: #000088;">die</span><span class="pun" style="color: #666600;">(</span><span class="str" style="color: #008800;">&#8216;您正在调 upload_avatars 接口!&#8217;</span><span class="pun" style="color: #666600;">);</span></li>
<li class="L1"><span class="pln" style="color: #000000;"> </span><span class="pun" style="color: #666600;">}</span></li>
</ol>
<div class="think-copy" style="color: #000000;">复制代码</div>
<div id="zclip-ZeroClipboardMovie_1" class="zclip" style="color: #000000;"></div>
<p><span style="color: #323232;">点击测试（对于客户端而言，也是直接调用这样的地址）：</span><br style="color: #323232;" /><a style="color: #72b939;" href="http://www.ezhi.net/api/test/index.php" target="_blank">http://www.ezhi.net/api/test/index.php</a><br style="color: #323232;" /><a style="color: #72b939;" href="http://www.ezhi.net/api/test/index.php?a=get_users" target="_blank">http://www.ezhi.net/api/test/index.php?a=get_users</a><br style="color: #323232;" /><a style="color: #72b939;" href="http://www.ezhi.net/api/test/index.php?a=get_users&amp;uid=10001" target="_blank">http://www.ezhi.net/api/test/index.php?a=get_users&amp;uid=10001</a><br style="color: #323232;" /><a style="color: #72b939;" href="http://www.ezhi.net/api/test/index.php?a=get_users&amp;uid=10002" target="_blank">http://www.ezhi.net/api/test/index.php?a=get_users&amp;uid=10002</a><br style="color: #323232;" /><a style="color: #72b939;" href="http://www.ezhi.net/api/test/index.php?a=get_users&amp;uid=10003" target="_blank">http://www.ezhi.net/api/test/index.php?a=get_users&amp;uid=10003</a><br style="color: #323232;" /><br style="color: #323232;" /><span style="color: #323232;">三、实际项目中，我们在开发 API 应该注意的几个事项（仅供参考）：</span><br style="color: #323232;" /><span style="color: #323232;">1、单文件实现多接口的形式有很多种，例如：if..elseif.. 或 switch 或 动态方法 (也就是TP的这种访问函数体的形式)</span><br style="color: #323232;" /><span style="color: #323232;">2、对于数据的输出最好用json，json具有相当强大的跨平台性，市场上各大主流编程语言都支持json解析，json正在逐步取代xml，成为网络数据的通用格式</span><br style="color: #323232;" /><span style="color: #323232;">3、接口安全，一定要增加接口验证。例如，客户端和服务端针对不同接口统一做好加密方式，服务端在对于每次接口需要都要进行验证。以保证防止接口被恶意刷新或黑客恶意调用，尤其是大型商业应用。</span><br style="color: #323232;" /><span style="color: #323232;">4、对于线上的 API 必须保证所有接口正常且关闭所有的错误信息 =&gt; error_reporting(0)，在输出JSON 时，不能有任何其它输出，否则，客户端将会获取错误的数据信息，98%直接导致客户端 Crash！</span><br style="color: #323232;" /><span style="color: #323232;">5、开发 API 和 WEB 有一定的区别，如果是 WEB 的话，可能代码出错了，不会导致特别严重的错误，也许只是导致数据写入和查询失败，也许导致 WEB 的某个部分错位或乱码。但如果是 API，99%的情况都是客户端直接Crash、闪退！</span><br style="color: #323232;" /><span style="color: #323232;">6、做接口开发，不建议使用框架开发，原因概括起来有两点（其实我有点冒风险的，本人也是 TPer 一枚，毕竟这是TP的官网）：</span><br style="color: #323232;" /><span style="color: #323232;">　　1）客户端一般对服务端的响应速度有极高要求，因此，使用最原生态的 PHP 完成接口开发，是最高效的，假如用到了框架，还需要加载各种不需要多余的文件，就好比夏天穿了件冬天的衣服。试想，你在玩手机的时候，使用一个应用随便一个操作，等半天才有动静，你受的了吗？</span><br style="color: #323232;" /><span style="color: #323232;">　　2）就是上面第4点提到的，框架对于WEB开发，是件很幸福的事，但对于 API 而言，你实在不敢想象它会给你出什么岔子！最后你将痛苦不堪~~因为很多框架都是为 WEB 诞生的（我也很期待有一天能看到专门为开发 API 而生的框架或者扩展）</span><br style="color: #323232;" /><br style="color: #323232;" /><span style="color: #323232;">　　说到这，不得不说扯一下，风靡互联网的开放平台。其实那些开放平台，所谓的开放，就是给你提供一个这样的接口，你根据他们提供的技术文档，按他们制定的格式和要求，调它们提供的接口文件（一般都是返回JSON或者XML），你就可以获取到他们的相关信息，例如：QQ用户基本信息、淘宝店铺、商品消息等等。然后在根据这些消息，在你的应用里完成交互。</span><br style="color: #323232;" /><br style="color: #323232;" /><span style="color: #323232;">　　其实，ajax 也是调用 API 的一种体现形式，你觉得呢？ 呵呵~~</span></p>
				<span class="align_left">&laquo; Prev：<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1020/index.html" rel="prev">乙未年丁亥月壬寅日與曼曼</a></span>
				<span class="align_right"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1028/index.html" rel="next">[转]PHP写webservice服务端</a>：Next &raquo;</span>
			</div>
		</div>

	<!-- You can start editing here. -->

		
<div class="comments-navi"></div>


<div id="respond">
<form action="http://blog.whatisit.cn/wp-comments-post.php" method="post" id="commentform">
<h4 class="clear">Leave a Reply</h4>



<div id="author_info">
<p><input type="text" name="author" id="author" value="" size="22" tabindex="1" aria-required='true' />
<label for="author">Name  </label></p>

<p><input type="text" name="email" id="email" value="" size="22" tabindex="2" aria-required='true' />
<label for="email">Mail (will not be published)  </label></p>

<p><input type="text" name="url" id="url" value="" size="22" tabindex="3" />
<label for="url">Website</label></p>
	</div>
	
<p><textarea name="comment" id="comment" cols="5" rows="10" tabindex="4" onkeydown="if(event.ctrlKey&&event.keyCode==13){document.getElementById('submit').click();return false};"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" class="subin" value="" />
 <input type='hidden' name='comment_post_ID' value='1026' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
 
</p><div id="cancel_reply"><a rel="nofollow" id="cancel-comment-reply-link" href="/?p=1026#respond" style="display:none;">点击这里取消回复。</a></div>
</form>
</div>

	
            <div class="content_foot conleft"></div>
        </div>
        
	<div id="sidebar" role="complementary">
		<!-- Search Start -->
		<div id="search">
			<form method="get" id="searchform" action="http://blog.whatisit.cn/wp-content/plugins/really-static/static/">
				<span class="st"><input type="text" value="" name="s" id="s" class="searchtxt" /></span><span class="ss"><input type="submit" name="submit" value="" class="searchsm" /></span>
			</form>
		</div>
		<div class="clear"></div>
		<!-- Search End -->
		<ul>
			<li id="search-2" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="http://blog.whatisit.cn/wp-content/plugins/really-static/static/">
				<div>
					<label class="screen-reader-text" for="s">搜索：</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="搜索" />
				</div>
			</form></li>
		<li id="recent-posts-2" class="widget widget_recent_entries">		<h2 class="widgettitle">近期文章</h2>
		<ul>
					<li>
				<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1137/index.html">Windows下降权MYSQL和apche的运行级别</a>
						</li>
					<li>
				<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1135/index.html">[转]windows2008 mysql 提权</a>
						</li>
					<li>
				<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1133/index.html">PHP一句话</a>
						</li>
					<li>
				<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1130/index.html">[轉]怎样在CentOS 7.0上安装和配置VNC服务器</a>
						</li>
					<li>
				<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1128/index.html">Shadowsocks优化方案</a>
						</li>
				</ul>
		</li>
		<li id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widgettitle">近期评论</h2>
<ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='http://weibo.com/tyand' rel='external nofollow' class='url'>韻秋</a></span>发表在《<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=47/index.html#comment-85">自省三聲</a>》</li><li class="recentcomments"><span class="comment-author-link"><a href='http://weibo.com/tyand' rel='external nofollow' class='url'>韻秋</a></span>发表在《<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=870/index.html#comment-100">IT便利貼</a>》</li><li class="recentcomments"><span class="comment-author-link"><a href='http://weibo.com/tyand' rel='external nofollow' class='url'>韻秋</a></span>发表在《<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=870/index.html#comment-99">IT便利貼</a>》</li><li class="recentcomments"><span class="comment-author-link"><a href='http://weibo.com/tyand' rel='external nofollow' class='url'>韻秋</a></span>发表在《<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=870/index.html#comment-98">IT便利貼</a>》</li><li class="recentcomments"><span class="comment-author-link"><a href='http://weibo.com/tyand' rel='external nofollow' class='url'>韻秋</a></span>发表在《<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=47/index.html#comment-84">自省三聲</a>》</li></ul></li>
<li id="archives-2" class="widget widget_archive"><h2 class="widgettitle">文章归档</h2>
		<ul>
			<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201604/index.html'>2016年四月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201603/index.html'>2016年三月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201602/index.html'>2016年二月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201601/index.html'>2016年一月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201512/index.html'>2015年十二月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201511/index.html'>2015年十一月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201510/index.html'>2015年十月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201509/index.html'>2015年九月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201508/index.html'>2015年八月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201507/index.html'>2015年七月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201505/index.html'>2015年五月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201504/index.html'>2015年四月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201503/index.html'>2015年三月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201502/index.html'>2015年二月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201501/index.html'>2015年一月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201412/index.html'>2014年十二月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201411/index.html'>2014年十一月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201405/index.html'>2014年五月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201404/index.html'>2014年四月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201403/index.html'>2014年三月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201402/index.html'>2014年二月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201401/index.html'>2014年一月</a></li>
		</ul>
		</li>
<li id="categories-2" class="widget widget_categories"><h2 class="widgettitle">分类目录</h2>
		<ul>
	<li class="cat-item cat-item-11"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=11/index.html" >Development</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=12/index.html" >Linux</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=13/index.html" >Safe for Network</a>
</li>
	<li class="cat-item cat-item-14"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=14/index.html" >Serveice for Net</a>
</li>
	<li class="cat-item cat-item-15"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=15/index.html" >Server For Win</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=1/index.html" >未分类</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=3/index.html" title="江湖恩怨几时休
策马相依四海游
几度春秋
终是一朝泯恩仇

">江湖舊事</a>
</li>
	<li class="cat-item cat-item-4"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=4/index.html" >江湖軼卷</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=5/index.html" >浮生度秋技術宅</a>
</li>
	<li class="cat-item cat-item-6"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=6/index.html" >破塵妖月</a>
</li>
	<li class="cat-item cat-item-8"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=8/index.html" title="汝道 天道 道之所道
吾道 心道 道汝道之所道">道是道痕</a>
</li>
	<li class="cat-item cat-item-9"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=9/index.html" >附庸風雅</a>
</li>
	<li class="cat-item cat-item-10"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=10/index.html" >麗魅魍魎</a>
</li>
		</ul>
</li>
<li id="meta-2" class="widget widget_meta"><h2 class="widgettitle">功能</h2>
			<ul>
						<li><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/wp-login.php">登录</a></li>
			<li><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/?feed=rss2">文章<abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/?feed=comments-rss2">评论<abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://cn.wordpress.org/" title="基于WordPress，一个优美、先进的个人信息发布平台。">WordPress.org</a></li>			</ul>
			</li>
					</ul>
  </div>
       </div>

<div id="footer" class="clear">
       	 <div class="wrap">
             <span><font  color="#d0d0d0"> 41 queries in 0.225 seconds.</font></span>
         </div>
</div>
</div>
<div id="wp-auto-top"><div id="wp-auto-top-top"></div><div id="wp-auto-top-comment"></div><div id="wp-auto-top-bottom"></div></div>
<script> var commentPositionId = '#comments';var wpAutoTopSpeed = 1;</script><style>
   #wp-auto-top{position:fixed;top:80%;right:50%;display:block;margin-right:-43%; z-index:9999;}
   #wp-auto-top-top,#wp-auto-top-comment,#wp-auto-top-bottom{background:url(http://blog.whatisit.cn/wp-content/plugins/wp-auto-top/img/23.png) no-repeat;position:relative;cursor:pointer;height:25px;width:29px;margin:10px 0 0;}
   #wp-auto-top-comment{background-position:left -30px;height:32px;}#wp-auto-top-bottom{background-position:left -68px;}
   #wp-auto-top-comment:hover{background-position:right -30px;}
   #wp-auto-top-top:hover{background-position:right 0;}
   #wp-auto-top-bottom:hover{background-position:right -68px ;}
   </style><script type='text/javascript' src='http://blog.whatisit.cn/wp-includes/js/comment-reply.min.js?ver=4.6.1'></script>
<script type='text/javascript' src='http://blog.whatisit.cn/wp-includes/js/wp-embed.min.js?ver=4.6.1'></script>
<script type='text/javascript' src='http://blog.whatisit.cn/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://blog.whatisit.cn/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='http://blog.whatisit.cn/wp-content/plugins/wp-auto-top/wp-auto-top.js?ver=4.6.1'></script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?99868b1eadabc674ab444818b2d365cb";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
</body>
</html>

<!-- Dynamic page generated in 0.222 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2016-11-15 20:30:58 -->
