<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>
    CentOS 7系统上架设DNS服务 &laquo; ___道子千秋
</title>
<link rel="stylesheet" href="http://blog.whatisit.cn/wp-content/themes/ink-and-wash/style.css" type="text/css" media="screen" />
<link title="RSS 2.0" type="application/rss+xml" href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/?feed=rss2" rel="alternate" />
<!--[if IE 6]>
<script type="text/javascript" src="http://blog.whatisit.cn/wp-content/themes/ink-and-wash/js/DD_belatedPNG.js"></script>
<script>DD_belatedPNG.fix('.nav li,.searchsm'); </script> 
<![endif]-->
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="韻秋小道童 &raquo; CentOS 7系统上架设DNS服务评论Feed" href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/?feed=rss2&#038;p=908" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/blog.whatisit.cn\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='https://api.w.org/' href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/?rest_route=/' />
<link rel='prev' title='PPTP-VPN For CentOS6.4' href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=906/index.html' />
<link rel='next' title='centos7连接vpn方法' href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=910/index.html' />
<meta name="generator" content="WordPress 4.6.1 - really-static 0.5" />
<link rel="canonical" href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=908/index.html" />
<link rel="alternate" type="application/json+oembed" href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/?rest_route=%2Foembed%2F1.0%2Fembed&#038;url=http%3A%2F%2Fblog.whatisit.cn%2Fwp-content%2Fplugins%2Freally-static%2Fstatic%2Fp%3D908%2Findex.html" />
<link rel="alternate" type="text/xml+oembed" href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/?rest_route=%2Foembed%2F1.0%2Fembed&#038;url=http%3A%2F%2Fblog.whatisit.cn%2Fwp-content%2Fplugins%2Freally-static%2Fstatic%2Fp%3D908%2Findex.html&#038;format=xml" />
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		</head>

<body itemtype="http://schema.org/WebPage" itemscope="">

   <div id="fullwrapper">
       <div class="wrap">
           <div class="header">
               <div class="logo"><p><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/"><font size="8" face="KaiTi">韻秋小道童</font></a></p><font size="5" face="KaiTi">被玩壞的小道童</font></div>
               	 <ul class="nav">
                 		<li><a title="首页" href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/">首页</a></li>
                 		<li><a title="江湖故事" href="/jhgs-html/">江湖故事</a></li>
	<li class="page_item page-item-870"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=870/index.html">IT便利貼</a></li>
<li class="page_item page-item-837"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=837/index.html">江湖故事</a></li>
<li class="page_item page-item-9"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=9/index.html">我的微博</a></li>
<li class="page_item page-item-47"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=47/index.html">自省三聲</a></li>
                </ul>
           </div>
       </div>
       <div class="wrap">	<div id="content" class="widecolumn" role="main">
		<div class="content_top conleft"></div>
	
		<div class="post-908 post type-post status-publish format-standard hentry category-linux tag-centos tag-centos7 tag-dns tag-linux tag-server" id="post-908">
			<h2>CentOS 7系统上架设DNS服务</h2>
				<div class="post_intro">
					<span>tydqq Post in <a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=12/index.html" rel="category">Linux</a>，Tags: <a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/tag=centos/index.html" rel="tag">CentOS</a>, <a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/tag=centos7/index.html" rel="tag">CentOS7</a>, <a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/tag=dns/index.html" rel="tag">DNS</a>, <a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/tag=linux/index.html" rel="tag">Linux</a>, <a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/tag=server/index.html" rel="tag">Server</a></span>
									</div>
				<div class="content_date">
					<div class="datebg">
						<span class="day">04</span>
						<span>八月</span>
						<span>2015</span>
					</div>
				</div>
				<div class="comments">
					<span class="cmt_num"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=908/index.html#respond">0</a></span>
				</div>
				
			<div class="entry">
				<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">文档说明：</span></strong></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">本 文档以一个案例来介绍如何在CentOS 7系统上部署DNS服务。该案例仅是我对如何部署DNS服务的知识总结，并非是生产环境中存在的案例。并且，该案例中用到的CentOS系统均是安装在 VMware虚拟机内的，虽然一般情况下这不会有什么不妥，但还是特别说明一下。</span></p>
<p><span id="more-908"></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">案例说明：</span></strong></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">本 案例使用了两台VMware虚拟机。两台虚拟机上均安装CentOS 7（详细版本号为7.0.1406，核心版本号为3.10.0-123.el7.x86_64），其中一台虚拟机用于模拟Master DNS服务器（假设IP为172.31.2.2），另一台虚拟机用于模拟Slave DNS服务器（假设IP为172.31.2.3）。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">并 且，假设DNS服务器所在园区网有自己的合法域名，为speedsnail.com，允许所有来源的主机对该域名进行解析。而当园区网内的主机要访问外网 域名时，DNS服务器会先查本地缓存，查不到则将该解析请求转发给ISP的DNS服务器（假设IP为202.96.128.86和 202.96.128.166），而不是转发给<strong style="padding: 0px; margin: 0px;">.</strong>（root）服务器。并且，只会对内网主机的解析请求进行转发（假设内网网段范围为172.31.0.0/16），而不会对外网主机的解析请求进行转发。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">DNS</span></strong><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">服务简要介绍：</span></strong></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">DNS</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">服务由<strong style="padding: 0px; margin: 0px;">BIND</strong>软件提供，启动后服务名为<strong style="padding: 0px; margin: 0px;">named</strong>，管理工具为<strong style="padding: 0px; margin: 0px;">rndc</strong>，debug工具为<strong style="padding: 0px; margin: 0px;">dig</strong>。主要配置文件为<strong style="padding: 0px; margin: 0px;">/etc/named.conf</strong>。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">要架设本案例中DNS服务，可按照如下步骤进行：</span></strong></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">1.<span style="padding: 0px; margin: 0px; font-size: 9px; font-family: 'Times New Roman';">      </span></span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">在chroot环境下安装BIND软件</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">要安装BIND软件，并让它运行在chroot环境下。那么只需安装bind-chroot软件，其它软件（包括BIND软件本身）也会自动进行安装，也即只需执行命令：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">[root@localhost~]# <strong style="padding: 0px; margin: 0px;">yum install bind-chroot</strong></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">执行上述命令后，yum程序就提示安装/升级下述软件了：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"><img style="padding: 0px; margin: 0px; vertical-align: top; border: none;" title="01.png" src="http://www.centoscn.com/uploads/allimg/150403/014S04F2-0.jpg" alt="wKiom1Uc9QzSxJBnAAEReYlRSZQ499.jpg" width="650" /></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">安装完成后，就需要启动named-chroot服务，并将它设置为开机启动：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">[root@localhost ~]# <strong style="padding: 0px; margin: 0px;">systemctl start named-chroot</strong></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">[root@localhost ~]# <strong style="padding: 0px; margin: 0px;">systemctl enablenamed-chroot</strong></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">上述命令执行完后，如果没什么问题，可使用下述命令来验证named-chroot服务的状态：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">[root@localhost ~]# <strong style="padding: 0px; margin: 0px;">systemctl status named-chroot</strong></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">2.<span style="padding: 0px; margin: 0px; font-size: 9px; font-family: 'Times New Roman';">      </span></span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">设定主DNS服务器上的配置文件/etc/named.conf</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">在修改主DNS服务器上的配置文件/etc/named.conf之前，先对其备份：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">[root@localhost~]#<strong style="padding: 0px; margin: 0px;"> cp –a /etc/named.conf/etc/named.conf.raw</strong></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">然后将其内容修改成如下所示：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">options {</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       listen-on port 53 { any; };           //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">侦听来自任意源IP对端口53的访问</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       listen-on-v6 port 53 { ::1; };          //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">设定IPv6侦听端口的，因为没有用到，所以保持默认</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       directory    &#8220;/var/named&#8221;;         //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">该项设定工作目录</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       dump-file   &#8220;/var/named/data/cache_dump.db&#8221;;   //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">执行命令rndcdumpdb后会把database保存到该指定档案</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       statistics-file &#8220;/var/named/data/named_stats.txt&#8221;;   //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">执行命令rndcstats后会把统计数据保存到该指定档案</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       memstatistics-file &#8220;/var/named/data/named_mem_stats.txt&#8221;;  //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">记录内存使用数据的文档路径</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       </span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">allow-query  { 172.31.0.0/16; };     //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">指定只有内网网段主机才能进行DNS查询（authoritative data）</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       recursion yes;                     //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">这个选项控制是否开启服务器的递归查询功能</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       allow-recursion { 172.31.0.0/16; };  //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">指定只有内网网段主机才能进行递归查询</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       forward first;                     //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">接收到查询请求时，会先转发到forwarders指定的DNS，查不到再执行递归</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       forwarders {                      //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">（接上面）当然，在转发之前，还会先查本地缓存</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">                202.96.128.86;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">                202.96.128.166;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       };</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 12px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">     dnssec-enable no;               //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">这部分是设置DNSSEC的。把它关掉，默认为yes。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 12px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">     dnssec-validationno;             //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">关掉，默认为yes。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 12px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">     dnssec-lookaside no;             //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">关掉，默认为auto</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">        bindkeys-file &#8220;/etc/named.iscdlv.key&#8221;;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">        managed-keys-directory &#8220;/var/named/dynamic&#8221;;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">        </span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">pid-file&#8221;/run/named/named.pid&#8221;;               //named</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">服务的PID文件存放位置，保持默认。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">        session-keyfile &#8220;/run/named/session.key&#8221;;       //TSIG</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">会话密钥存放文件路径，保持默认。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">};</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">logging {                                             //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">设置日志的语句</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       channel default_debug {</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">                file&#8221;data/named.run&#8221;;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">                severity dynamic;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       };</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">};</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">zone &#8220;.&#8221; IN {                                           //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">设定root zone的语句</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       type hint;                                     //hint</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">类型专门用于root域</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       file &#8220;named.ca&#8221;;                               //root</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">域的配置文件为/var/named/named.ca</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">};</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">zone &#8220;speedsnail.com&#8221; IN {                            //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">设定域speedsnail.com的语句</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       type master;                                  //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">指明本服务器是这个域的主DNS服务器</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       file &#8220;speedsnail.com.zone&#8221;;                    //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">指定这个域的配置文件为/var/named/speedsnail.com.zone</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       allow-transfer { 172.31.2.3; };                   //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">指定这个域的从DNS服务器的IP</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       allow-query { any; };                           //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">允许来自任意IP对这个域的解析请求</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">};</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">include&#8221;/etc/named.rfc1912.zones&#8221;;                   //zone</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">语句也可以写在这个文件里面</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">include &#8220;/etc/named.root.key&#8221;;                         //root</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">域的key文件，与DNSSEC有关</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;">
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">3.<span style="padding: 0px; margin: 0px; font-size: 9px; font-family: 'Times New Roman';">      </span></span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">设定主DNS服务器上的zone配置文件</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">在上面的配置文件named.conf中，因为有定义一个正向解析的域speedsnail.com，所以也要设定这个域的配置文件speedsnail.com.zone。在工作目录/var/named下创建这个配置文件，并将它的内容修改成如下所示：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">$ORIGIN speedsnail.com.</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">$TTL 86400</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">在zone的配置文件中，它是以分号来作为批注语句标识符的。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">修改这个配置文件时，要注意，名称最后面没有加句点的是主机名，最后面加了句点的是FQDN（除了$ORIGIN那里）。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;$ORIGIN</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">那里填域名。下面的@符号会引用这里填写的值。如果不填，则会引用主配置文件中zone语句后面的值。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;$TTL</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">表示timeto live值，表示当其它DNS查询到本zone的DNS记录时，这个记录能在它的DNS缓存中存在多久，单位为秒。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">@      IN  SOA         dns1.speedsnail.com.  xie.speedsnail.com.  (</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">                          2015040101</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">                          21600</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">                          3600</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">                          604800</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">                          86400 )</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;SOA</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">后面的两个参数分别是主DNS服务器主机名和管理者邮箱(xie@speedsnail.com)。因为@符号有特殊含义，所以写成这样。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">括号内的第一个参数是序号，代表本配置文档的新旧，序号越大，表示越新。每次修改本文档后，都要将这个值改大。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">第二个参数是刷新频率，表示slave隔多久会跟master比对一次配置档案，单位为秒。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">第三个参数是失败重新尝试时间，单位为秒</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">第四个参数是失效时间，单位为秒。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">在BIND9中，第五个参数表示其它DNS服务器能缓存negative answers的时间，单位为秒。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">@      IN  NS          dns1.speedsnail.com.</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">         IN  NS          dns2.speedsnail.com.</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">dns1   IN  A            172.31.2.2</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">dns2   IN  A            172.31.2.3</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">类型NS定义指定域的DNS服务器主机名(如dns1.speedsnail.com)，不管是主DNS还是从DNS。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">类型A定义指定主机(如dns1)的IP地址。如果是使用的IPv6地址，则需使用类型AAAA。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">@         IN  MX  10     mail1.speedsnail.com.</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">            IN  MX  20     mail2.speedsnail.com.</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">mail1    IN  A              172.31.2.4</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">mail2    IN  A              172.31.2.5</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">类型MX定义指定域的邮件服务器主机名(如mail1.speedsnail.com)。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;MX</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">后面的数字为优先级，越小越优先。同样的优先级值则可以在多台邮件服务器之间进行负载分担。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">www     IN  CNAME      servs.speedsnail.com.</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">ftp        IN  CNAME     servs.speedsnail.com.</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">servs    IN   A              172.31.2.6</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">类型CNAME用于定义别名。通常用于同一台主机提供多个服务的情况。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">以这里的设定为例，当要解析ftp.speedsnail.com的IP时，它会解析成主机servs.speedsnail.com的IP。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">forum   IN A              172.31.2.7</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">travel    IN A              172.31.2.8</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">            IN A              172.31.2.9</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">如上面所示，也可以直接设定某一台主机(如forum.speedsnail.com)的IP。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">;</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">同一台主机(如travel.speedsnail.com)也可以设定多个IP。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">4.<span style="padding: 0px; margin: 0px; font-size: 9px; font-family: 'Times New Roman';">      </span></span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">设置从DNS服务器</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">重 复第1个步骤，给从DNS服务器安装bind-chroot软件，然后设置开机启动并将它开启。做好后，就修改从DNS服务器的主配置文件/etc /named.conf。从DNS的主配置文件与主DNS的基本相同，因此直接把配置复制过去就行，但zone语句需要进行修改。如下所示，从DNS的 named.conf配置文件中的zone语句：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">zone &#8220;speedsnail.com&#8221; IN {</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       type slave;                                    //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">指明本服务器是这个域的从DNS服务器</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       file &#8220;slaves/speedsnail.com.zone&#8221;;              //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">从DNS的zone配置文件一定要放置在工作目录下的slaves目录中</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       masters { 172.31.2.2; };                         //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">指定这个域的主DNS服务器的IP</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">       allow-query { any; };                           //</span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">允许来自任意IP对这个域的解析请求</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">};</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">与主DNS不同的是，从DNS上的zone配置文件不需要手动建立，它会通过同步自动建立。因此，从DNS上的配置文件这样就设置好了。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">5.<span style="padding: 0px; margin: 0px; font-size: 9px; font-family: 'Times New Roman';">      </span></span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">放通端口</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">在主DNS和从DNS服务器上放通tcp和udp端口53：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">[root@localhost~]# <strong style="padding: 0px; margin: 0px;">firewall-cmd &#8211;zone=public&#8211;add-port=53/tcp &#8211;permanent</strong></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">[root@localhost~]# <strong style="padding: 0px; margin: 0px;">firewall-cmd &#8211;zone=public&#8211;add-port=53/udp &#8211;permanent</strong></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">重启防火墙以让更改立刻生效：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">[root@localhost~]# <strong style="padding: 0px; margin: 0px;">firewall-cmd –reload</strong></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">可使用以下命令检查配置是否成功：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">[root@localhost~]# <strong style="padding: 0px; margin: 0px;">firewall-cmd &#8211;list-all</strong></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">6.<span style="padding: 0px; margin: 0px; font-size: 9px; font-family: 'Times New Roman';">      </span></span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">设置named服务</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">在主DNS和从DNS服务器上，启动named服务，并将它设置为开机启动：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">[root@localhost~]# <strong style="padding: 0px; margin: 0px;">systemctl start named</strong></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">[root@localhost~]# <strong style="padding: 0px; margin: 0px;">systemctl enable named</strong></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">上述命令执行完后，如果没什么问题，可使用下述命令来验证named服务的状态：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">[root@localhost~]# <strong style="padding: 0px; margin: 0px;">systemctl status named</strong></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">7.<span style="padding: 0px; margin: 0px; font-size: 9px; font-family: 'Times New Roman';">      </span></span><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">测试与验证</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">默认情况下，DNS服务的日志信息会放置到/var/log/messages文档中。如果有修改配置文件，并启动或重启named服务的话，建议第一时间先查看这个日志文档，看有没有报错：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"><img style="padding: 0px; margin: 0px; vertical-align: top; border: none;" title="02.png" src="http://www.centoscn.com/uploads/allimg/150403/014S0H31-1.jpg" alt="wKioL1Uc9tawSiEnAAVR4tRKgBQ612.jpg" width="650" /></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-family: 微软雅黑, sans-serif; font-size: 12px;">从DNS服务器中关于zone配置文件更新的日志：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-family: 微软雅黑, sans-serif; font-size: 12px;"><img style="padding: 0px; margin: 0px; vertical-align: top; border: none;" title="03.png" src="http://www.centoscn.com/uploads/allimg/150403/014S01641-2.jpg" alt="wKioL1Uc9yyQJyq2AAHCHAP0ekE523.jpg" width="650" /></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-family: 微软雅黑, sans-serif; font-size: 12px;">检查DNS服务的端口（端口53）是否有开启：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-family: 微软雅黑, sans-serif; font-size: 12px;"><img style="padding: 0px; margin: 0px; vertical-align: top; border: none;" title="04.png" src="http://www.centoscn.com/uploads/allimg/150403/014S049E-3.jpg" alt="wKiom1Uc9inTtTXxAAJ4yF0YecE862.jpg" width="650" /></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-family: 微软雅黑, sans-serif; font-size: 12px;">使用dig命令在从DNS上测试主DNS能否正常解析外网网址：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-family: 微软雅黑, sans-serif; font-size: 12px;"><img style="padding: 0px; margin: 0px; vertical-align: top; border: none;" title="05.png" src="http://www.centoscn.com/uploads/allimg/150403/014S04033-4.jpg" alt="wKioL1Uc96fD0i8xAAFow55DsGQ910.jpg" /></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">使用dig命令在从DNS上测试主DNS能否正常解析自己定义的网址：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"><img style="padding: 0px; margin: 0px; vertical-align: top; border: none;" title="06.png" src="http://www.centoscn.com/uploads/allimg/150403/014S03J7-5.jpg" alt="wKiom1Uc9qjBHqJ5AAFwBbjD0ec441.jpg" /></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">验证DNS Forwarders是否有正常工作：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"><img style="padding: 0px; margin: 0px; vertical-align: top; border: none;" title="07.png" src="http://www.centoscn.com/uploads/allimg/150403/014S05530-6.jpg" alt="wKioL1Uc-D7iQ_e1AAQXZ692zfM716.jpg" width="650" /></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">从 上面的截图可以看出，当我在主DNS服务器(172.31.2.2)上指定DNS为自己去解析jilupian.youku.com时，抓包结果显示，服 务器确实将DNS查询转发给了我所配置的ISP的DNS中的一个(202.96.128.166)，这表明Forwarders有配置成功。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">在本文档最前面的案例说明部分，有提到允许内网主机的解析请求而不允许外网主机的解析请求，并且允许所有主机对域speedsnail.com的解析请求。为了验证这种限制机制是否能生效，先将主DNS服务器上的named.conf配置文件修改成如下所示：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><img style="padding: 0px; margin: 0px; vertical-align: top; border: none;" title="08.png" src="http://www.centoscn.com/uploads/allimg/150403/014S013D-7.jpg" alt="wKioL1Uc-ICDuH4BAAD6XI38iDM248.jpg" /></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">这样修改的话，仍然是所有主机能对域speedsnail.com进行解析，但只有主DNS服务器(172.31.2.2)自身能解析其它的域。重启主DNS上的named服务以让修改生效。然后，在从DNS服务器(172.31.2.3)上进行测试：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"><img style="padding: 0px; margin: 0px; vertical-align: top; border: none;" title="09.png" src="http://www.centoscn.com/uploads/allimg/150403/014S0J40-8.jpg" alt="wKioL1Uc-MWQYYatAAEACkxiyvU084.jpg" /></span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">可以看到，以172.31.2.2为DNS，外网网址(www.baidu.com)无法解析，而内网网址(www.speedsnail.com)仍然可以解析，这说明，限制解析请求来源IP的设定是正确的。主DNS服务器上的日志也验证了这一点：</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><img style="padding: 0px; margin: 0px; vertical-align: top; border: none;" title="10.png" src="http://www.centoscn.com/uploads/allimg/150403/014S01a1-9.jpg" alt="wKioL1Uc-QDhuX0FAAIZdK8HRVk053.jpg" width="650" /></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">总结：</span></strong></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">从 DNS软件自身的设定方面来说，在CentOS 7上部署DNS与在更早的系统上部署DNS并没有太大差别，不过底层机制可能有所改变。从系统方面来说，CentOS 7的应用程序服务管理和防火墙管理有所改变，如这篇文章里面使用了systemctl和firewall-cmd，而没有使用chkconfig和 iptables。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;"><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">可用资料：</span></strong></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">named.conf</span></strong><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">（5）</span></strong><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">：说明/etc/named.conf中各语句格式的man文档</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">/usr/share/doc/bind*/sample/etc/named.conf</span></strong><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">：/etc/named.conf的配置范例</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">/usr/share/doc/bind*/sample/etc/named.rfc1912.zones</span></strong><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">：与文档/etc/named.rfc1912.zones的默认内容是一样的</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;"> </span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">/usr/share/doc/bind*/Bv9ARM.pdf</span></strong><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">或<strong style="padding: 0px; margin: 0px;">Bv9ARM.html</strong>：BIND 9管理参考手册</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><strong style="padding: 0px; margin: 0px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux</span></strong><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">：Networking Guide手册中有关于DNS服务器架设和配置的介绍。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;">
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px; text-indent: 24px;"><span style="padding: 0px; margin: 0px; font-size: 12px; font-family: 微软雅黑, sans-serif;">附件是我这篇文章里使用到的几个配置文件，有需要可下载。</span></p>
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;">
<p style="padding: 0px; margin: 0px; clear: both; height: auto; overflow: hidden; color: #505050; font-family: 宋体, 'Arial Narrow', arial, serif; font-size: 14px; line-height: 28px;">本文出自 “技术永不止步” 博客，请务必保留此出处http://techsnail.blog.51cto.com/9807313/1627731</p>
				<span class="align_left">&laquo; Prev：<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=906/index.html" rel="prev">PPTP-VPN For CentOS6.4</a></span>
				<span class="align_right"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=910/index.html" rel="next">centos7连接vpn方法</a>：Next &raquo;</span>
			</div>
		</div>

	<!-- You can start editing here. -->

		
<div class="comments-navi"></div>


<div id="respond">
<form action="http://blog.whatisit.cn/wp-comments-post.php" method="post" id="commentform">
<h4 class="clear">Leave a Reply</h4>



<div id="author_info">
<p><input type="text" name="author" id="author" value="" size="22" tabindex="1" aria-required='true' />
<label for="author">Name  </label></p>

<p><input type="text" name="email" id="email" value="" size="22" tabindex="2" aria-required='true' />
<label for="email">Mail (will not be published)  </label></p>

<p><input type="text" name="url" id="url" value="" size="22" tabindex="3" />
<label for="url">Website</label></p>
	</div>
	
<p><textarea name="comment" id="comment" cols="5" rows="10" tabindex="4" onkeydown="if(event.ctrlKey&&event.keyCode==13){document.getElementById('submit').click();return false};"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" class="subin" value="" />
 <input type='hidden' name='comment_post_ID' value='908' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
 
</p><div id="cancel_reply"><a rel="nofollow" id="cancel-comment-reply-link" href="/?p=908#respond" style="display:none;">点击这里取消回复。</a></div>
</form>
</div>

	
            <div class="content_foot conleft"></div>
        </div>
        
	<div id="sidebar" role="complementary">
		<!-- Search Start -->
		<div id="search">
			<form method="get" id="searchform" action="http://blog.whatisit.cn/wp-content/plugins/really-static/static/">
				<span class="st"><input type="text" value="" name="s" id="s" class="searchtxt" /></span><span class="ss"><input type="submit" name="submit" value="" class="searchsm" /></span>
			</form>
		</div>
		<div class="clear"></div>
		<!-- Search End -->
		<ul>
			<li id="search-2" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="http://blog.whatisit.cn/wp-content/plugins/really-static/static/">
				<div>
					<label class="screen-reader-text" for="s">搜索：</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="搜索" />
				</div>
			</form></li>
		<li id="recent-posts-2" class="widget widget_recent_entries">		<h2 class="widgettitle">近期文章</h2>
		<ul>
					<li>
				<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1137/index.html">Windows下降权MYSQL和apche的运行级别</a>
						</li>
					<li>
				<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1135/index.html">[转]windows2008 mysql 提权</a>
						</li>
					<li>
				<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1133/index.html">PHP一句话</a>
						</li>
					<li>
				<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1130/index.html">[轉]怎样在CentOS 7.0上安装和配置VNC服务器</a>
						</li>
					<li>
				<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/p=1128/index.html">Shadowsocks优化方案</a>
						</li>
				</ul>
		</li>
		<li id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widgettitle">近期评论</h2>
<ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='http://weibo.com/tyand' rel='external nofollow' class='url'>韻秋</a></span>发表在《<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=47/index.html#comment-85">自省三聲</a>》</li><li class="recentcomments"><span class="comment-author-link"><a href='http://weibo.com/tyand' rel='external nofollow' class='url'>韻秋</a></span>发表在《<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=870/index.html#comment-100">IT便利貼</a>》</li><li class="recentcomments"><span class="comment-author-link"><a href='http://weibo.com/tyand' rel='external nofollow' class='url'>韻秋</a></span>发表在《<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=870/index.html#comment-99">IT便利貼</a>》</li><li class="recentcomments"><span class="comment-author-link"><a href='http://weibo.com/tyand' rel='external nofollow' class='url'>韻秋</a></span>发表在《<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=870/index.html#comment-98">IT便利貼</a>》</li><li class="recentcomments"><span class="comment-author-link"><a href='http://weibo.com/tyand' rel='external nofollow' class='url'>韻秋</a></span>发表在《<a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/page_id=47/index.html#comment-84">自省三聲</a>》</li></ul></li>
<li id="archives-2" class="widget widget_archive"><h2 class="widgettitle">文章归档</h2>
		<ul>
			<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201604/index.html'>2016年四月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201603/index.html'>2016年三月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201602/index.html'>2016年二月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201601/index.html'>2016年一月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201512/index.html'>2015年十二月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201511/index.html'>2015年十一月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201510/index.html'>2015年十月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201509/index.html'>2015年九月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201508/index.html'>2015年八月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201507/index.html'>2015年七月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201505/index.html'>2015年五月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201504/index.html'>2015年四月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201503/index.html'>2015年三月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201502/index.html'>2015年二月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201501/index.html'>2015年一月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201412/index.html'>2014年十二月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201411/index.html'>2014年十一月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201405/index.html'>2014年五月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201404/index.html'>2014年四月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201403/index.html'>2014年三月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201402/index.html'>2014年二月</a></li>
	<li><a href='http://blog.whatisit.cn/wp-content/plugins/really-static/static/m=201401/index.html'>2014年一月</a></li>
		</ul>
		</li>
<li id="categories-2" class="widget widget_categories"><h2 class="widgettitle">分类目录</h2>
		<ul>
	<li class="cat-item cat-item-11"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=11/index.html" >Development</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=12/index.html" >Linux</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=13/index.html" >Safe for Network</a>
</li>
	<li class="cat-item cat-item-14"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=14/index.html" >Serveice for Net</a>
</li>
	<li class="cat-item cat-item-15"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=15/index.html" >Server For Win</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=1/index.html" >未分类</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=3/index.html" title="江湖恩怨几时休
策马相依四海游
几度春秋
终是一朝泯恩仇

">江湖舊事</a>
</li>
	<li class="cat-item cat-item-4"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=4/index.html" >江湖軼卷</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=5/index.html" >浮生度秋技術宅</a>
</li>
	<li class="cat-item cat-item-6"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=6/index.html" >破塵妖月</a>
</li>
	<li class="cat-item cat-item-8"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=8/index.html" title="汝道 天道 道之所道
吾道 心道 道汝道之所道">道是道痕</a>
</li>
	<li class="cat-item cat-item-9"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=9/index.html" >附庸風雅</a>
</li>
	<li class="cat-item cat-item-10"><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/cat=10/index.html" >麗魅魍魎</a>
</li>
		</ul>
</li>
<li id="meta-2" class="widget widget_meta"><h2 class="widgettitle">功能</h2>
			<ul>
						<li><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/wp-login.php">登录</a></li>
			<li><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/?feed=rss2">文章<abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://blog.whatisit.cn/wp-content/plugins/really-static/static/?feed=comments-rss2">评论<abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://cn.wordpress.org/" title="基于WordPress，一个优美、先进的个人信息发布平台。">WordPress.org</a></li>			</ul>
			</li>
					</ul>
  </div>
       </div>

<div id="footer" class="clear">
       	 <div class="wrap">
             <span><font  color="#d0d0d0"> 41 queries in 0.228 seconds.</font></span>
         </div>
</div>
</div>
<div id="wp-auto-top"><div id="wp-auto-top-top"></div><div id="wp-auto-top-comment"></div><div id="wp-auto-top-bottom"></div></div>
<script> var commentPositionId = '#comments';var wpAutoTopSpeed = 1;</script><style>
   #wp-auto-top{position:fixed;top:80%;right:50%;display:block;margin-right:-43%; z-index:9999;}
   #wp-auto-top-top,#wp-auto-top-comment,#wp-auto-top-bottom{background:url(http://blog.whatisit.cn/wp-content/plugins/wp-auto-top/img/23.png) no-repeat;position:relative;cursor:pointer;height:25px;width:29px;margin:10px 0 0;}
   #wp-auto-top-comment{background-position:left -30px;height:32px;}#wp-auto-top-bottom{background-position:left -68px;}
   #wp-auto-top-comment:hover{background-position:right -30px;}
   #wp-auto-top-top:hover{background-position:right 0;}
   #wp-auto-top-bottom:hover{background-position:right -68px ;}
   </style><script type='text/javascript' src='http://blog.whatisit.cn/wp-includes/js/comment-reply.min.js?ver=4.6.1'></script>
<script type='text/javascript' src='http://blog.whatisit.cn/wp-includes/js/wp-embed.min.js?ver=4.6.1'></script>
<script type='text/javascript' src='http://blog.whatisit.cn/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://blog.whatisit.cn/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='http://blog.whatisit.cn/wp-content/plugins/wp-auto-top/wp-auto-top.js?ver=4.6.1'></script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?99868b1eadabc674ab444818b2d365cb";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
</body>
</html>

<!-- Dynamic page generated in 0.225 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2016-11-15 20:31:10 -->
